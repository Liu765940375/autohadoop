#!/usr/bin/env bash
#source ./conf/env.sh

SCRIPT_PATH="`dirname $0`/../scripts"
SCRIPT_NAME="cluster.sh"

CONF_PATH="`dirname $0`/../conf"
ENV_NAME="env.sh"

PACKAGE_PATH="`dirname $0`/../packages"

source $SCRIPT_PATH/$SCRIPT_NAME
source $CONF_PATH/$ENV_NAME

HADOOP_TAR="$PACKAGE_PATH/hadoop-${HADOOP_VERSION}.tar.gz"
JAVA_TAR="$PACKAGE_PATH/jdk-${JAVA_VERSION}-linux-x64.tar.gz"

case "$1" in
    create)
        echo "deploy_nodes"
        ../scripts/py/deploy_slave.py
        #if [ ! -d $PACHAGE_PATH ]
        #then
	    #    mkdir -p $PACKAGE_PATH
        #fi
        #if [ ! -f $JAVA_TAR ]; then
        #        wget -P $PACKAGE_PATH http://$DOWNLOAD_SERVER/software/jdk-${JAVA_VERSION}-linux-x64.tar.gz
        #fi
	    #if [ ! -f $HADOOP_TAR ]; then
    	#	wget -P $PACKAGE_PATH http://$DOWNLOAD_SERVER/hadoop/hadoop-${HADOOP_VERSION}.tar.gz
	    #fi
        #add_nodes $SLAVES_CONF_NAME
	# Format namenode 
        #$HADOOP_HOME/bin/hdfs namenode -format
        ;;
    *)
        echo "Usage [create]" >&2
        exit 3
        ;;
esac

exit 0
