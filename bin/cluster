#!/usr/bin/env bash
source ./conf/env.sh

SCRIPT_PATH="`dirname $0`/../scripts"
SCRIPT_NAME="cluster.sh"

CONF_PATH="`dirname $0`/../conf"
ENV_NAME="env.sh"


PACKAGE_PATH="`dirname $0`/../packages"

source $SCRIPT_PATH/$SCRIPT_NAME
source $CONF_PATH/$ENV_NAME

HADOOP_TAR="`dirname $0`/../packages/hadoop-${HADOOP_VERSION}.tar.gz"

case "$1" in
    create)
        echo "deploy_nodes"
        if [ ! -d $PACHAGE_PATH ]
        then
	  mkdir -p $PACKAGE_PATH
        fi
	if [ ! -f $HADOOP_TAR ]; then
    		wget -P $PACKAGE_PATH http://$DOWNLOAD_SERVER/hadoop/hadoop-${HADOOP_VERSION}.tar.gz
	fi
        add_nodes $SLAVES_CONF_NAME
        ;;
    *)
        echo "Usage [create]" >&2
        exit 3
        ;;
esac

exit 0
